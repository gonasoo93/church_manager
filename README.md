# 청소년교회 관리 시스템

청소년교회 서기 업무를 위한 웹 기반 관리 시스템입니다.

## 주요 기능

- 📋 **명부 관리**: 청소년 정보 등록, 수정, 삭제 및 검색
- ✅ **출석 체크**: 날짜별 출석 관리 및 통계 차트
- 🙏 **예배 기록**: 설교, 찬양, 특별순서 등 예배 정보 기록
- 📝 **회의 기록**: Markdown 기반 회의록 작성 및 실시간 미리보기
- 🔐 **인증 시스템**: JWT 기반 로그인 및 권한 관리
- 👥 **사용자 관리**: 관리자가 사용자 계정 생성 및 관리

## 기술 스택

### 백엔드
- Node.js + Express
- SQLite (better-sqlite3)
- JWT 인증
- bcryptjs (비밀번호 암호화)

### 프론트엔드
- Vanilla JavaScript (SPA)
- CSS3 (다크 테마, 글래스모피즘)
- Marked.js (Markdown 파싱)
- Chart.js (통계 차트)

## 설치 및 실행

### 1. 의존성 설치
```bash
cd e:/code_test/youth-church-manager
npm install
```

### 2. 환경 변수 설정
`.env` 파일이 이미 생성되어 있습니다. 필요시 수정하세요.

**초기 관리자 계정:**
- 아이디: `admin`
- 비밀번호: `admin123`

⚠️ **보안 주의**: 실제 운영 환경에서는 반드시 비밀번호를 변경하세요!

### 3. 서버 실행
```bash
npm start
```

또는 개발 모드:
```bash
npm run dev
```

### 4. 브라우저 접속
```
http://localhost:3000
```

## 사용 방법

### 첫 로그인
1. 브라우저에서 `http://localhost:3000` 접속
2. 초기 관리자 계정으로 로그인 (admin / admin123)
3. 관리자 페이지에서 추가 사용자 계정 생성

### 명부 관리
1. 좌측 메뉴에서 "명부관리" 클릭
2. "청소년 등록" 버튼으로 새 청소년 추가
3. 검색창으로 이름 검색 가능

### 출석 체크
1. "출석체크" 메뉴 선택
2. 날짜 선택 후 "조회" 클릭
3. 각 청소년의 출석/지각/결석 선택
4. "저장" 버튼으로 출석 기록 저장
5. 하단 차트에서 출석 통계 확인

### 예배 기록
1. "예배기록" 메뉴 선택
2. "예배 기록 추가" 버튼 클릭
3. 날짜, 설교 제목, 본문, 찬양 등 입력
4. 저장 후 목록에서 확인 가능

### 회의 기록 (Markdown + AI 요약)
1. "회의기록" 메뉴 선택
2. "회의록 작성" 버튼 클릭
3. 좌측에 Markdown으로 내용 작성
4. 우측에서 실시간 미리보기 확인
5. **🤖 AI 요약 버튼 클릭** (Gemini API 사용)
   - 회의 내용을 자동으로 분석
   - 전체 요약, 논의사항, 결정사항, 실행계획 추출
   - 결정 사항이 자동으로 입력됨
6. 저장 후 목록에서 확인

**AI 요약 기능 사용하기:**
- `.env` 파일에 `GEMINI_API_KEY` 설정 필요
- Google AI Studio에서 무료 API 키 발급: https://makersuite.google.com/app/apikey
- API 키 설정 후 서버 재시작

**Markdown 예시:**
```markdown
# 안건

## 1. 여름 수련회 준비
- 날짜: 8월 10일~12일
- 장소: OO 수양관

## 결정 사항
- 참가비: 50,000원
- 신청 마감: 7월 31일
```

### 관리자 기능
1. "관리자" 메뉴 선택 (관리자만 표시)
2. 새 사용자 계정 생성
3. 역할 설정 (일반/관리자)
4. 불필요한 계정 삭제

## 데이터 백업

데이터는 `database.sqlite` 파일에 저장됩니다.
정기적으로 이 파일을 백업하세요!

```bash
# 백업 예시 (Windows)
copy database.sqlite backup\database_2026-01-29.sqlite
```

## 배포

### 로컬 네트워크에서 사용
같은 네트워크의 다른 기기에서 접속하려면:

1. 서버 PC의 IP 주소 확인
```bash
ipconfig
```

2. 다른 기기에서 접속
```
http://[서버IP]:3000
```

### 클라우드 배포
- Heroku, Railway, Render 등의 플랫폼 사용 가능
- 환경 변수 설정 필수
- SQLite 대신 PostgreSQL 사용 권장 (영구 저장)

## 문제 해결

### 포트가 이미 사용 중
`.env` 파일에서 `PORT` 변경

### 로그인 안됨
1. 서버 재시작
2. 브라우저 캐시 삭제
3. 개발자 도구(F12) 콘솔에서 에러 확인

### 데이터가 사라짐
- `database.sqlite` 파일 확인
- 백업 파일 복원

## 라이선스

MIT License

## 문의

문제가 발생하거나 기능 추가가 필요한 경우 개발자에게 문의하세요.
